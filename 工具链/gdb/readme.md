# gdb入门

使用gdb调试的程序在使用gcc编译时需要添加`-g`选项, 否则无法在调试过程中使用`list`命令查看函数源码.

```
$ gdb 目标二进制文件
(gdb) l
No symbol table is loaded.  Use the "file" command.
```

```
gcc -g -o test test.c
```

## 查看帮助手册

```
help list | breakpoints
```

## list

最基础的命令就是`list`(缩写为`l`). 

- `l`多次执行 可以实现类似翻页一样的效果, 依次显示之后几行的代码;
- `l -`: 与上面相反, 是向前翻页的操作;
- `l 行号n`: 查看指定行前后5行(共11行)的内容;
- `l 行号m, 行号n`: 查看m, n两行之间的内容;
- `l 文件名:行号n`: 查看指定文件第n行前后的内容.
    - 不过这个文件路径格式目前不清楚有什么要求, 貌似绝对路径可以, 相对路径不能带有`./`这类字符;
    - 另外`l 文件名:行号m,l 文件名:行号n`也是可以的, 文件名一致就行.
- `l 函数名`: 可以查看目标函数附近的内容.
- `l 文件名:函数名`: 与行号用法同理.

## 断点

- `b 行号`: 在某行设置断点
- `b 源文件名:行号`: 多文件调试时在指定源文件的指定行设置断点
- `info b`: 查看所有断点信息
- `delete breakpoints 断点号(一般是数字, 即断点的id, 自增)`: 删除一个断点

## stepin与next

单步运行时, 使用`s(stepin)`命令可以进入到函数内部. 与其相对的是`n(next)`跳过函数, 直接进行下一步.

## 打印变量

有`p(print)`, 可以打印当前上下文中的变量, 可以使用`*指针名`的形式打印指针指向的变量, 不过这个命令不能打印结构体, 需要`explore`命令.
