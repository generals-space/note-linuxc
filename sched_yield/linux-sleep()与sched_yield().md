# linux-sleep()与sched_yield()

参考文章

1. [Linux多线程学习（七）sched_yield](https://blog.csdn.net/xiaoyeyopulei/article/details/7965533)

sched_yield()这个函数可以使用另一个级别等于或高于当前线程的线程先运行。如果没有符合条件的线程，那么这个函数将会立刻返回然后继续执行当前线程的程序。

这是一个主动行为, 可以防止当前线程由于长时间的计算任务占用cpu而导致其他任务无法进行.

网上找了一些示例, 但都没什么实际作用, 因为这个函数加与不加看不出什么区别(比如当前目录下的`sched_yield.c.1`)...

我猜想这个函数应该只能影响当前进程, 与其他进程无关. 毕竟进程才是资源分配的基本单位, 有个子线程把自己的时间片让出来, 不给其他子线程而是给了别的进程, 比如浏览器, 视频播放器, 像话吗?

这个函数只是给了一个各线程公平运行的机会, 保证程序整体的性能.

在golang源码中就有这样的机制, go1.2的`src/pkg/runtime/sys_linux_amd64.s` -> `runtime·osyield()`函数.

可以说是某个线程意识到自己接下来不需要占用cpu的时间, 给了其他线程运行的机会.
